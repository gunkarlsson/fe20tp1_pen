// VARIABLES
const textarea = document.querySelector("#textarea");
const newDoc = document.querySelector("#new-doc");
const deleteDocButton = document.querySelector("#delete-doc");

// OBJECTS
const docData = {
  id: "",
  title: "",
  content: "",
  favorite: true,
  creationDate: "",
  lastSavedDate: "",
  tags: [],
};

// EVENTLISTENERS
newDoc.addEventListener("click", () => {
  // console.log("click");

  createNewDoc();
});

deleteDocButton.addEventListener("click", () => {
  textarea.value = "";

  deleteDoc();
});

// Input event
textarea.addEventListener("input", (e) => {
  // input value in textarea,
  saveDoc();
  // koden som ska sparas till local storage
});

// FUNCTIONS
function saveDoc() {
  docData.content = textarea.value;

  // kollar om det finns ett creation date, om inte så skapar den datum)
  // kollar om note finns
  if (!docData.creationDate) {
    docData.creationDate = new Date();

    // unique ID generated by timestamp
    docData.id = Date.now();
  }
  docData.lastSavedDate = new Date();
  window.localStorage.setItem(docData.id, JSON.stringify(docData));
}

function deleteDoc() {
  window.localStorage.removeItem(docData.id);
}

function createNewDoc() {
  // töm textarea för ny yta
  textarea.value = "";

  // console.log(typeof element);
  for (element in docData) {
    // console.log(element.toString());
    if (element === "tags") {
      // töm tags array
      docData[element] = [];
    } else {
      // övriga blir tom sträng
      docData[element] = "";
    }
  }
  console.log(docData);
}
